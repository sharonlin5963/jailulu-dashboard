import{a as u,o as t,y as w,w as k}from"./chunk-NL6KNZEE-CQkoafV0.js";import{L as $}from"./Loading-2XmdfwSh.js";import{H as D}from"./Header-BLSKRTB6.js";import{g as f,b as C,u as j,c as p,d as h,e as N,P as F,j as v,x as B,m as P,q as R,B as E,y as q,z,A as O}from"./config-DlFqBImT.js";import{a as I,c as J,f as A}from"./utils-De00pD5-.js";import{C as b}from"./Chip-qccW3AxG.js";import"./createTheme-CCn_blMs.js";import"./index-LvXiyyRQ.js";function W(s){return f("MuiCard",s)}C("MuiCard",["root"]);const G=s=>{const{classes:e}=s;return N({root:["root"]},W,e)},K=p(F,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),S=u.forwardRef(function(e,o){const a=j({props:e,name:"MuiCard"}),{className:i,raised:r=!1,...n}=a,c={...a,raised:r},l=G(c);return t.jsx(K,{className:h(l.root,i),elevation:r?8:void 0,ref:o,ownerState:c,...n})});function Q(s){return f("MuiCardActionArea",s)}const x=C("MuiCardActionArea",["root","focusVisible","focusHighlight"]),X=s=>{const{classes:e}=s;return N({root:["root"],focusHighlight:["focusHighlight"]},Q,e)},Y=p(B,{name:"MuiCardActionArea",slot:"Root"})(P(({theme:s})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${x.focusHighlight}`]:{opacity:(s.vars||s).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${x.focusVisible} .${x.focusHighlight}`]:{opacity:(s.vars||s).palette.action.focusOpacity}}))),Z=p("span",{name:"MuiCardActionArea",slot:"FocusHighlight"})(P(({theme:s})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:s.transitions.create("opacity",{duration:s.transitions.duration.short})}))),_=u.forwardRef(function(e,o){const a=j({props:e,name:"MuiCardActionArea"}),{children:i,className:r,focusVisibleClassName:n,slots:c={},slotProps:l={},...M}=a,m=a,d=X(m),y={slots:c,slotProps:l},[U,L]=v("root",{elementType:Y,externalForwardedProps:{...y,...M},shouldForwardComponentProp:!0,ownerState:m,ref:o,className:h(d.root,r),additionalProps:{focusVisibleClassName:h(n,d.focusVisible)}}),[T,V]=v("focusHighlight",{elementType:Z,externalForwardedProps:y,ownerState:m,ref:o,className:d.focusHighlight});return t.jsxs(U,{...L,children:[i,t.jsx(T,{...V})]})});function tt(s){return f("MuiCardContent",s)}C("MuiCardContent",["root"]);const st=s=>{const{classes:e}=s;return N({root:["root"]},tt,e)},et=p("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),H=u.forwardRef(function(e,o){const a=j({props:e,name:"MuiCardContent"}),{className:i,component:r="div",...n}=a,c={...a,component:r},l=st(c);return t.jsx(et,{as:r,className:h(l.root,i),ownerState:c,ref:o,...n})}),ot=R(t.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"})),at=R(t.jsx("path",{d:"m4 12 1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8z"})),g=({headerTitle:s,total:e,currentMonthCount:o,lastMonthCount:a})=>{const{trend:i,percentage:r}=I(o,a),n=i==="decrement";return t.jsx("article",{children:t.jsx(S,{children:t.jsxs(H,{children:[t.jsx("h3",{className:"text-base font-medium mb-6",children:s}),t.jsxs("div",{className:"flex md:flex-col-reverse xl:flex-row xl:items-center gap-3",children:[t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsx("h2",{className:"text-4xl font-semibold",children:e}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("figure",{className:"flex items-center gap-1",children:[n?t.jsx(ot,{color:"error"}):t.jsx(at,{color:"success"}),t.jsxs("figcaption",{className:J("text-sm font-medium",n?"text-red-100":"text-success-500"),children:[Math.round(r),"%"]})]}),t.jsx("p",{className:"text-sm font-medium text-gray-100 truncate",children:"vs 上個月"})]})]}),t.jsx("img",{className:"grow",src:`/assets/icons/${n?"decrement.svg":"increment.svg"}`,alt:"trend graph"})]})]})})})},rt=({id:s,name:e,imageUrl:o,group:a,price:i,isSale:r,specialPrice:n})=>t.jsx(S,{children:t.jsxs(_,{component:w,to:`/product-edit/${s}`,children:[t.jsx("img",{src:o,alt:e,className:" w-full h-[180px] rounded-t-xl object-cover aspect-square"}),t.jsxs(H,{children:[t.jsxs("article",{className:"flex flex-col gap-3 text-sm md:text-lg",children:[t.jsx("h2",{className:"font-semibold text-dark-100 line-clamp-1",children:e}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx(b,{color:"primary",variant:"outlined",label:a,size:"small"}),t.jsxs("div",{className:"flex gap-1 font-normal",children:[t.jsx("span",{className:r?"text-gray-100 line-through decoration-red-100":"text-dark-300",children:A(i)}),r&&n&&t.jsx("span",{className:"text-red-100",children:A(n)})]})]})]}),r&&t.jsx(b,{color:"error",label:"SALE",className:"absolute top-3 right-3 tracking-wider"})]})]})}),nt={usersJoined:{total:125,currentMonth:20,lastMonth:10},itemsCreated:{total:60,currentMonth:3,lastMonth:2},userRole:{total:23,currentMonth:10,lastMonth:15}},lt=()=>{const{usersJoined:s,itemsCreated:e,userRole:o}=nt,[a,i]=u.useState([]),[r,n]=u.useState(!1),c=async()=>{try{n(!0);const m=(await q(z(O,"products"))).docs.map(d=>({id:d.id,...d.data()})).filter(d=>d.status===1);i(m.slice(0,4))}finally{n(!1)}};return u.useEffect(()=>{c()},[]),t.jsxs("main",{className:"wrapper dashboard",children:[t.jsx(D,{title:"您好 👋",description:"提供商品管理、訂單追蹤與銷售分析功能，幫助快速更新商品資訊、查看客戶資料及掌握市場趨勢，高效提升運營效率。"}),t.jsx("section",{className:"flex flex-col gap-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsx(g,{headerTitle:"總商品數",total:e.total,currentMonthCount:e.currentMonth,lastMonthCount:e.lastMonth}),t.jsx(g,{headerTitle:"總用戶數",total:s.total,currentMonthCount:s.currentMonth,lastMonthCount:s.lastMonth}),t.jsx(g,{headerTitle:"今日用戶活躍度",total:o.total,currentMonthCount:o.currentMonth,lastMonthCount:o.lastMonth})]})}),t.jsxs("section",{className:"flex flex-col gap-5 mt-2.5",children:[t.jsx("h1",{className:"text-xl font-semibold text-dark-100",children:"商品列表"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-7",children:a.length===0?t.jsx(w,{to:"/products",className:"col-span-full m-auto",children:t.jsx(E,{variant:"contained",children:"暫無商品，前往商品管理頁"})}):a.slice(0,4).map(l=>t.jsx(rt,{id:l.id,name:l.name,imageUrl:l.imageUrl,group:l.group.value,price:l.price,isSale:l.isSale,specialPrice:l.specialPrice},l.id))}),t.jsx($,{open:r})]})]})},gt=k(lt);export{gt as default};
