import{w as E,t as j,v as y,a as i,o as e}from"./chunk-NL6KNZEE-CQkoafV0.js";import{B as S,T as p,E as L}from"./Alert-4o-22xWm.js";import{g as M,L as N}from"./auth-cSAo9A2T.js";import{P,B as W,s as A,a as B}from"./config-DlFqBImT.js";import{c as C,a as g,u as I,o as T}from"./index.esm-Du1fJ1Qh.js";import"./createTheme-CCn_blMs.js";import"./index-DBUmQ_pX.js";import"./index-LvXiyyRQ.js";const O=C().shape({email:g().email("請輸入有效的 Email").required("Email 為必填"),password:g().min(6,"密碼至少 6 碼").required("密碼為必填")});async function G(){if(await M())return j("/")}const U=()=>{var m,u;const n=y(),[f,a]=i.useState(""),[h,t]=i.useState(!1),[x,l]=i.useState(!1),{register:c,handleSubmit:w,formState:{errors:r}}=I({resolver:T(O)}),b=o=>{const s={"auth/invalid-email":"Email 格式不正確","auth/invalid-credential":"信箱或密碼錯誤"}[o];a(s||"登入失敗，請稍後再試"),t(!0)},v=async({email:o,password:d})=>{a(""),t(!1);try{l(!0),await A(B,o,d),n("/index")}catch(s){b(s.code)}finally{l(!1)}};return e.jsxs("main",{className:"w-full h-screen flex bg-[url(/assets/images/auth-img.png)] bg-cover bg-no-repeat bg-center",children:[e.jsx("section",{className:"size-full bg-white/20 backdrop-filter-[blur(2px)] flex-center",children:e.jsxs(P,{elevation:3,sx:{borderRadius:"20px",maxWidth:{sm:"420px"},width:"100%"},className:"flex flex-col items-center gap-9 p-10",children:[e.jsx(N,{}),e.jsxs(S,{component:"form",noValidate:!0,className:"flex flex-col gap-4 w-full",children:[e.jsx(p,{label:"Email",variant:"outlined",fullWidth:!0,...c("email"),error:!!r.email,helperText:(m=r.email)==null?void 0:m.message}),e.jsx(p,{label:"密碼",variant:"outlined",type:"password",fullWidth:!0,...c("password"),error:!!r.password,helperText:(u=r.password)==null?void 0:u.message})]}),e.jsx(W,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,loading:x,loadingPosition:"start",onClick:w(v),children:"登入"})]})}),e.jsx(L,{open:h,message:f,severity:"error",anchorOrigin:{vertical:"top",horizontal:"right"},onClose:()=>t(!1)})]})},H=E(U);export{G as clientLoader,H as default};
